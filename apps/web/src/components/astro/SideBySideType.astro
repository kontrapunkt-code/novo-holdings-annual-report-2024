---
import CallToAction from "@/components/astro/CallToAction.astro";
import Video from "@/components/astro/Video.astro";
import type { PageModuleProps } from "@/scripts/queries";
import { usePortableText } from "astro-portabletext";
import type { TypedObject } from "astro-portabletext/types";

type Props = {
	node: Extract<
		NonNullable<PageModuleProps<"sideBySideModule">["left"]>[number],
		{ _type: "video" | "button" }
	>;
};

const { node } = Astro.props;
const { getUnknownComponent } = usePortableText(node as TypedObject);

const Component =
	node._type === "video" ? Video
	: node._type === "button" ? CallToAction
	: getUnknownComponent();
---

<>
	{/* @ts-expect-error */}
	<Component {...node} />
</>
